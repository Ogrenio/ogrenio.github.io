(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{4137:function(e,a,s){Promise.resolve().then(s.bind(s,4079))},4079:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return d}});var r=s(7437),n=s(2265),t=s(7996),i=s(4230),l=s(5978);let m=async()=>{try{let e=await (0,l.PL)((0,l.hJ)(i.db,"users")),a=new Map;return e.forEach(e=>{let s=e.data(),r=s.kurumId||s.organization;if(r){let e=a.get(r)||{isim:s.kurum||s.organization||"Bilinmeyen Kurum",kontejan:s.kurumKontejan||null,kullaniciSayisi:0,email:s.email||"",name:s.name||"",phone:s.phone||"",createdAt:s.createdAt||"",organization:s.organization||"",premium:s.kurumPremium||!1};a.set(r,{...e,kullaniciSayisi:e.kullaniciSayisi+1,email:e.email||s.email||"",name:e.name||s.name||"",phone:e.phone||s.phone||"",createdAt:e.createdAt||s.createdAt||"",organization:e.organization||s.organization||"",premium:e.premium||s.kurumPremium||!1})}}),Array.from(a.entries()).map(e=>{let[a,s]=e;return{id:a,...s}})}catch(e){throw console.error("T\xfcm kurumlar alınırken hata oluştu:",e),e}},o=async(e,a)=>{try{let s=(0,l.IO)((0,l.hJ)(i.db,"users"),(0,l.ar)("kurumId","==",e)),r=await (0,l.PL)(s),n=[];r.forEach(e=>{let s=(0,l.JU)(i.db,"users",e.id),r={};void 0!==a.isim&&(r.kurum=a.isim),void 0!==a.kontejan&&(r.kurumKontejan=a.kontejan),void 0!==a.email&&(r.email=a.email),void 0!==a.name&&(r.name=a.name),void 0!==a.phone&&(r.phone=a.phone),void 0!==a.organization&&(r.organization=a.organization),void 0!==a.premium&&(r.kurumPremium=a.premium),Object.keys(r).length>0&&n.push((0,l.r7)(s,r))}),await Promise.all(n)}catch(e){throw console.error("Kurum g\xfcncellenirken hata oluştu:",e),e}};var c=s(9064),d=()=>{let[e,a]=(0,n.useState)([]),[s,i]=(0,n.useState)(""),[l,d]=(0,n.useState)(!0),[u,x]=(0,n.useState)(null),[h,b]=(0,n.useState)({}),[p,j]=(0,n.useState)(!1),[g,y]=(0,n.useState)({isim:"",kontejan:null,email:"",name:"",phone:"",organization:"",premium:!1});(0,n.useEffect)(()=>{(async()=>{try{let e=await m();a(e)}catch(e){console.error(e),c.Am.error("Kurumlar y\xfcklenirken bir hata oluştu")}finally{d(!1)}})()},[]);let f=e=>{x(e.id),b({isim:e.isim,kontejan:e.kontejan,email:e.email,name:e.name,phone:e.phone,organization:e.organization,premium:e.premium})},N=async s=>{try{await o(s,h),a(e.map(e=>e.id===s?{...e,...h}:e)),x(null),c.Am.success("Kurum bilgileri g\xfcncellendi")}catch(e){console.error(e),c.Am.error("G\xfcncelleme sırasında hata oluştu")}},k=()=>{x(null),b({})},v=e=>{let{name:a,value:s,type:r,checked:n}=e.target;b(e=>({...e,[a]:"checkbox"===r?n:"kontejan"===a?s?parseInt(s):null:s}))},w=e=>{let{name:a,value:s,type:r,checked:n}=e.target;y(e=>({...e,[a]:"checkbox"===r?n:"kontejan"===a?s?parseInt(s):null:s}))},C=async()=>{try{let s="new-".concat(Date.now());a([...e,{...g,id:s,kullaniciSayisi:0,createdAt:new Date().toISOString()}]),j(!1),y({isim:"",kontejan:null,email:"",name:"",phone:"",organization:"",premium:!1}),c.Am.success("Yeni kurum eklendi (demo)")}catch(e){console.error(e),c.Am.error("Kurum eklenirken hata oluştu")}},z=async s=>{if(confirm("Bu kurumu silmek istediğinize emin misiniz? Bu işlem geri alınamaz!"))try{a(e.filter(e=>e.id!==s)),c.Am.success("Kurum silindi (demo)")}catch(e){console.error(e),c.Am.error("Kurum silinirken hata oluştu")}},K=async(s,r)=>{try{await o(s,{premium:!r}),a(e.map(e=>e.id===s?{...e,premium:!r}:e)),c.Am.success("Premium ".concat(r?"pasif":"aktif"," edildi"))}catch(e){console.error(e),c.Am.error("Premium durumu değiştirilirken hata oluştu")}},S=e.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())||e.email.toLowerCase().includes(s.toLowerCase())||e.isim.toLowerCase().includes(s.toLowerCase())||e.organization.toLowerCase().includes(s.toLowerCase()));return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Kurum Y\xf6netimi"}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{className:"relative w-3/4",children:[(0,r.jsx)(t.jRj,{className:"absolute left-3 top-3 text-gray-400"}),(0,r.jsx)("input",{type:"text",placeholder:"Kurum veya organizasyon ara...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-amber-500 focus:border-amber-500",value:s,onChange:e=>i(e.target.value)})]}),(0,r.jsxs)("button",{onClick:()=>{j(!0)},className:"flex items-center bg-amber-600 hover:bg-amber-700 text-white px-4 py-2 rounded-md",children:[(0,r.jsx)(t.OvN,{className:"mr-2"}),"Yeni Kurum"]})]}),p&&(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden mb-6 p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Yeni Kurum Ekle"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kurum Adı"}),(0,r.jsx)("input",{type:"text",name:"isim",value:g.isim,onChange:w,className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kontejan"}),(0,r.jsx)("input",{type:"number",name:"kontejan",value:g.kontejan||"",onChange:w,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Sınırsız i\xe7in boş bırakın"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yetkili Adı"}),(0,r.jsx)("input",{type:"text",name:"name",value:g.name,onChange:w,className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yetkili Email"}),(0,r.jsx)("input",{type:"email",name:"email",value:g.email,onChange:w,className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon"}),(0,r.jsx)("input",{type:"tel",name:"phone",value:g.phone,onChange:w,className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Organizasyon"}),(0,r.jsx)("input",{type:"text",name:"organization",value:g.organization,onChange:w,className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",name:"premium",id:"new-premium",checked:g.premium,onChange:w,className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-gray-300 rounded"}),(0,r.jsx)("label",{htmlFor:"new-premium",className:"ml-2 block text-sm text-gray-700",children:"Premium \xdcyelik"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end mt-4 space-x-2",children:[(0,r.jsxs)("button",{onClick:()=>{j(!1),y({isim:"",kontejan:null,email:"",name:"",phone:"",organization:"",premium:!1})},className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-100",children:[(0,r.jsx)(t.q5L,{className:"inline mr-2"}),"İptal"]}),(0,r.jsxs)("button",{onClick:C,className:"px-4 py-2 bg-amber-600 text-white rounded-md hover:bg-amber-700",children:[(0,r.jsx)(t.mW3,{className:"inline mr-2"}),"Kaydet"]})]})]}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,r.jsxs)("h2",{className:"text-lg font-semibold p-4 bg-gray-100 flex justify-between items-center",children:[(0,r.jsx)("span",{children:"Kurum İstatistikleri"}),(0,r.jsxs)("span",{className:"text-sm font-normal",children:[S.length," kurum bulundu"]})]}),l?(0,r.jsx)("div",{className:"text-center p-8 text-amber-600",children:"Y\xfckleniyor..."}):S.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4",children:S.map(e=>{let a=null!==e.kontejan?Math.min(100,e.kullaniciSayisi/e.kontejan*100):0;return(0,r.jsx)("div",{className:"border rounded-lg p-4 relative hover:shadow-md transition-shadow ".concat(e.premium?"border-amber-400 bg-amber-50":""),children:u===e.id?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("h3",{className:"font-medium flex items-center",children:[(0,r.jsx)(t.m6D,{className:"mr-2 text-amber-600"}),(0,r.jsx)("input",{type:"text",name:"isim",value:h.isim||"",onChange:v,className:"border-b border-gray-300 focus:outline-none focus:border-amber-500"})]}),(0,r.jsxs)("span",{className:"text-sm bg-amber-100 text-amber-800 px-2 py-1 rounded",children:["ID: ",e.id]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-500",children:"Email"}),(0,r.jsx)("input",{type:"email",name:"email",value:h.email||"",onChange:v,className:"w-full p-1 border border-gray-300 rounded text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-500",children:"Yetkili"}),(0,r.jsx)("input",{type:"text",name:"name",value:h.name||"",onChange:v,className:"w-full p-1 border border-gray-300 rounded text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-500",children:"Telefon"}),(0,r.jsx)("input",{type:"tel",name:"phone",value:h.phone||"",onChange:v,className:"w-full p-1 border border-gray-300 rounded text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-500",children:"Kontejan"}),(0,r.jsx)("input",{type:"number",name:"kontejan",value:h.kontejan||"",onChange:v,className:"w-full p-1 border border-gray-300 rounded text-sm",placeholder:"Sınırsız"})]}),(0,r.jsxs)("div",{className:"col-span-2",children:[(0,r.jsx)("label",{className:"block text-xs text-gray-500",children:"Organizasyon"}),(0,r.jsx)("input",{type:"text",name:"organization",value:h.organization||"",onChange:v,className:"w-full p-1 border border-gray-300 rounded text-sm"})]}),(0,r.jsxs)("div",{className:"col-span-2 flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",name:"premium",id:"premium-".concat(e.id),checked:h.premium||!1,onChange:v,className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-gray-300 rounded"}),(0,r.jsx)("label",{htmlFor:"premium-".concat(e.id),className:"ml-2 block text-xs text-gray-700",children:"Premium \xdcyelik"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 pt-2",children:[(0,r.jsx)("button",{onClick:k,className:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-100",children:"İptal"}),(0,r.jsx)("button",{onClick:()=>N(e.id),className:"px-3 py-1 text-sm bg-amber-600 text-white rounded hover:bg-amber-700",children:"Kaydet"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsxs)("h3",{className:"font-medium flex items-center",children:[(0,r.jsx)(t.m6D,{className:"mr-2 text-amber-600"}),e.isim,e.premium&&(0,r.jsx)(t.nae,{className:"ml-2 text-amber-500",title:"Premium \xdcye"})]}),(0,r.jsxs)("span",{className:"text-sm bg-amber-100 text-amber-800 px-2 py-1 rounded",children:["ID: ",e.id]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Email:"}),(0,r.jsx)("span",{children:e.email})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Yetkili:"}),(0,r.jsx)("span",{children:e.name})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Telefon:"}),(0,r.jsx)("span",{children:e.phone||"Belirtilmemiş"})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Kontejan:"}),(0,r.jsx)("span",{children:null!==e.kontejan?e.kontejan:"Sınırsız"})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Kullanıcı Sayısı:"}),(0,r.jsx)("span",{children:e.kullaniciSayisi})]}),null!==e.kontejan&&(0,r.jsxs)("div",{className:"pt-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Doluluk:"}),(0,r.jsxs)("span",{children:[Math.round(a),"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-amber-600 h-2 rounded-full",style:{width:"".concat(a,"%")}})})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Organizasyon:"}),(0,r.jsx)("span",{children:e.organization})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Premium:"}),(0,r.jsx)("span",{children:(0,r.jsx)("button",{onClick:()=>K(e.id,e.premium),className:"px-2 py-1 rounded text-xs ".concat(e.premium?"bg-amber-100 text-amber-800 hover:bg-amber-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"),children:e.premium?"Premium Aktif":"Premium Değil"})})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Oluşturulma:"}),(0,r.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString()})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 mt-4",children:[(0,r.jsx)("button",{onClick:()=>z(e.id),className:"p-1 text-red-600 hover:text-red-800",title:"Sil",children:(0,r.jsx)(t.Ybf,{})}),(0,r.jsx)("button",{onClick:()=>f(e),className:"p-1 text-amber-600 hover:text-amber-800",title:"D\xfczenle",children:(0,r.jsx)(t.vPQ,{})})]})]})},e.id)})}):(0,r.jsx)("div",{className:"text-center p-8 text-gray-500",children:"Kurum bulunamadı"})]})]})})}},4230:function(e,a,s){"use strict";let r,n,t;s.d(a,{I:function(){return t},db:function(){return n}});var i=s(738),l=s(5978),m=s(3301);let o={apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:"",measurementId:""};if(!(0,i.C6)().length){if(Object.values(o).every(e=>void 0!==e&&""!==e))try{r=(0,i.ZF)(o),n=(0,l.ad)(r),t=(0,m.v0)(r)}catch(e){console.error("Firebase initialization error",e)}else console.error("Firebase config is missing or incomplete")}}},function(e){e.O(0,[358,242,956,943,67,971,117,744],function(){return e(e.s=4137)}),_N_E=e.O()}]);