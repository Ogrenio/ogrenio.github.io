(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{4137:function(e,a,s){Promise.resolve().then(s.bind(s,4079))},4079:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return c}});var n=s(7437),t=s(2265),l=s(7996),r=s(4230),i=s(5978);let o=async()=>{try{let e=await (0,i.PL)((0,i.hJ)(r.db,"users")),a=new Map;return e.forEach(e=>{let s=e.data();if(s.kurumId){let e=s.kurumId,n=a.get(e)||{isim:s.kurum||"Bilinmeyen Kurum",kontejan:s.kurumKontejan||null,kullaniciSayisi:0,email:s.email||"",name:s.name||"",phone:s.phone||"",createdAt:s.createdAt||"",organization:s.organization||""};a.set(e,{...n,kullaniciSayisi:n.kullaniciSayisi+1,email:n.email||s.email||"",name:n.name||s.name||"",phone:n.phone||s.phone||"",createdAt:n.createdAt||s.createdAt||"",organization:n.organization||s.organization||""})}}),Array.from(a.entries()).map(e=>{let[a,s]=e;return{id:a,...s}})}catch(e){throw console.error("T\xfcm kurumlar alınırken hata oluştu:",e),e}},m=async(e,a)=>{try{let s=(0,i.IO)((0,i.hJ)(r.db,"users"),(0,i.ar)("kurumId","==",e)),n=await (0,i.PL)(s),t=[];n.forEach(e=>{let s=(0,i.JU)(r.db,"users",e.id),n={};void 0!==a.isim&&(n.kurum=a.isim),void 0!==a.kontejan&&(n.kurumKontejan=a.kontejan),void 0!==a.email&&(n.email=a.email),void 0!==a.name&&(n.name=a.name),void 0!==a.phone&&(n.phone=a.phone),void 0!==a.organization&&(n.organization=a.organization),Object.keys(n).length>0&&t.push((0,i.r7)(s,n))}),await Promise.all(t)}catch(e){throw console.error("Kurum g\xfcncellenirken hata oluştu:",e),e}};var d=s(9064),c=()=>{let[e,a]=(0,t.useState)([]),[s,r]=(0,t.useState)(""),[i,c]=(0,t.useState)(!0),[u,x]=(0,t.useState)(null),[h,j]=(0,t.useState)({}),[b,p]=(0,t.useState)(!1),[g,y]=(0,t.useState)({isim:"",kontejan:null,email:"",name:"",phone:"",organization:""});(0,t.useEffect)(()=>{(async()=>{try{let e=await o();a(e)}catch(e){console.error(e),d.Am.error("Kurumlar y\xfcklenirken bir hata oluştu")}finally{c(!1)}})()},[]);let f=e=>{x(e.id),j({isim:e.isim,kontejan:e.kontejan,email:e.email,name:e.name,phone:e.phone,organization:e.organization})},N=async s=>{try{await m(s,h),a(e.map(e=>e.id===s?{...e,...h}:e)),x(null),d.Am.success("Kurum bilgileri g\xfcncellendi")}catch(e){console.error(e),d.Am.error("G\xfcncelleme sırasında hata oluştu")}},v=()=>{x(null),j({})},k=e=>{let{name:a,value:s}=e.target;j(e=>({...e,[a]:"kontejan"===a?s?parseInt(s):null:s}))},w=e=>{let{name:a,value:s}=e.target;y(e=>({...e,[a]:"kontejan"===a?s?parseInt(s):null:s}))},z=async()=>{try{let s="new-".concat(Date.now());a([...e,{...g,id:s,kullaniciSayisi:0,createdAt:new Date().toISOString()}]),p(!1),y({isim:"",kontejan:null,email:"",name:"",phone:"",organization:""}),d.Am.success("Yeni kurum eklendi (demo)")}catch(e){console.error(e),d.Am.error("Kurum eklenirken hata oluştu")}},C=async s=>{if(confirm("Bu kurumu silmek istediğinize emin misiniz? Bu işlem geri alınamaz!"))try{a(e.filter(e=>e.id!==s)),d.Am.success("Kurum silindi (demo)")}catch(e){console.error(e),d.Am.error("Kurum silinirken hata oluştu")}},K=e.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())||e.email.toLowerCase().includes(s.toLowerCase())||e.isim.toLowerCase().includes(s.toLowerCase())||e.organization.toLowerCase().includes(s.toLowerCase()));return(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,n.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Kurum Y\xf6netimi"}),(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsxs)("div",{className:"relative w-3/4",children:[(0,n.jsx)(l.jRj,{className:"absolute left-3 top-3 text-gray-400"}),(0,n.jsx)("input",{type:"text",placeholder:"Kurum veya organizasyon ara...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-amber-500 focus:border-amber-500",value:s,onChange:e=>r(e.target.value)})]}),(0,n.jsxs)("button",{onClick:()=>{p(!0)},className:"flex items-center bg-amber-600 hover:bg-amber-700 text-white px-4 py-2 rounded-md",children:[(0,n.jsx)(l.OvN,{className:"mr-2"}),"Yeni Kurum"]})]}),b&&(0,n.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden mb-6 p-6",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Yeni Kurum Ekle"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kurum Adı"}),(0,n.jsx)("input",{type:"text",name:"isim",value:g.isim,onChange:w,className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kontejan"}),(0,n.jsx)("input",{type:"number",name:"kontejan",value:g.kontejan||"",onChange:w,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Sınırsız i\xe7in boş bırakın"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yetkili Adı"}),(0,n.jsx)("input",{type:"text",name:"name",value:g.name,onChange:w,className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yetkili Email"}),(0,n.jsx)("input",{type:"email",name:"email",value:g.email,onChange:w,className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon"}),(0,n.jsx)("input",{type:"tel",name:"phone",value:g.phone,onChange:w,className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Organizasyon"}),(0,n.jsx)("input",{type:"text",name:"organization",value:g.organization,onChange:w,className:"w-full p-2 border border-gray-300 rounded-md"})]})]}),(0,n.jsxs)("div",{className:"flex justify-end mt-4 space-x-2",children:[(0,n.jsxs)("button",{onClick:()=>{p(!1),y({isim:"",kontejan:null,email:"",name:"",phone:"",organization:""})},className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-100",children:[(0,n.jsx)(l.q5L,{className:"inline mr-2"}),"İptal"]}),(0,n.jsxs)("button",{onClick:z,className:"px-4 py-2 bg-amber-600 text-white rounded-md hover:bg-amber-700",children:[(0,n.jsx)(l.mW3,{className:"inline mr-2"}),"Kaydet"]})]})]}),(0,n.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,n.jsxs)("h2",{className:"text-lg font-semibold p-4 bg-gray-100 flex justify-between items-center",children:[(0,n.jsx)("span",{children:"Kurum İstatistikleri"}),(0,n.jsxs)("span",{className:"text-sm font-normal",children:[K.length," kurum bulundu"]})]}),i?(0,n.jsx)("div",{className:"text-center p-8 text-amber-600",children:"Y\xfckleniyor..."}):K.length>0?(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4",children:K.map(e=>{let a=null!==e.kontejan?Math.min(100,e.kullaniciSayisi/e.kontejan*100):0;return(0,n.jsx)("div",{className:"border rounded-lg p-4 relative hover:shadow-md transition-shadow",children:u===e.id?(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("h3",{className:"font-medium flex items-center",children:[(0,n.jsx)(l.m6D,{className:"mr-2 text-amber-600"}),(0,n.jsx)("input",{type:"text",name:"isim",value:h.isim||"",onChange:k,className:"border-b border-gray-300 focus:outline-none focus:border-amber-500"})]}),(0,n.jsxs)("span",{className:"text-sm bg-amber-100 text-amber-800 px-2 py-1 rounded",children:["ID: ",e.id]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs text-gray-500",children:"Email"}),(0,n.jsx)("input",{type:"email",name:"email",value:h.email||"",onChange:k,className:"w-full p-1 border border-gray-300 rounded text-sm"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs text-gray-500",children:"Yetkili"}),(0,n.jsx)("input",{type:"text",name:"name",value:h.name||"",onChange:k,className:"w-full p-1 border border-gray-300 rounded text-sm"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs text-gray-500",children:"Telefon"}),(0,n.jsx)("input",{type:"tel",name:"phone",value:h.phone||"",onChange:k,className:"w-full p-1 border border-gray-300 rounded text-sm"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs text-gray-500",children:"Kontejan"}),(0,n.jsx)("input",{type:"number",name:"kontejan",value:h.kontejan||"",onChange:k,className:"w-full p-1 border border-gray-300 rounded text-sm",placeholder:"Sınırsız"})]}),(0,n.jsxs)("div",{className:"col-span-2",children:[(0,n.jsx)("label",{className:"block text-xs text-gray-500",children:"Organizasyon"}),(0,n.jsx)("input",{type:"text",name:"organization",value:h.organization||"",onChange:k,className:"w-full p-1 border border-gray-300 rounded text-sm"})]})]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-2 pt-2",children:[(0,n.jsx)("button",{onClick:v,className:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-100",children:"İptal"}),(0,n.jsx)("button",{onClick:()=>N(e.id),className:"px-3 py-1 text-sm bg-amber-600 text-white rounded hover:bg-amber-700",children:"Kaydet"})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,n.jsxs)("h3",{className:"font-medium flex items-center",children:[(0,n.jsx)(l.m6D,{className:"mr-2 text-amber-600"}),e.isim]}),(0,n.jsxs)("span",{className:"text-sm bg-amber-100 text-amber-800 px-2 py-1 rounded",children:["ID: ",e.id]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Email:"}),(0,n.jsx)("span",{children:e.email})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Yetkili:"}),(0,n.jsx)("span",{children:e.name})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Telefon:"}),(0,n.jsx)("span",{children:e.phone||"Belirtilmemiş"})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Kontejan:"}),(0,n.jsx)("span",{children:null!==e.kontejan?e.kontejan:"Sınırsız"})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Kullanıcı Sayısı:"}),(0,n.jsx)("span",{children:e.kullaniciSayisi})]}),null!==e.kontejan&&(0,n.jsxs)("div",{className:"pt-2",children:[(0,n.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Doluluk:"}),(0,n.jsxs)("span",{children:[Math.round(a),"%"]})]}),(0,n.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,n.jsx)("div",{className:"bg-amber-600 h-2 rounded-full",style:{width:"".concat(a,"%")}})})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Organizasyon:"}),(0,n.jsx)("span",{children:e.organization})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Oluşturulma:"}),(0,n.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString()})]})]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-2 mt-4",children:[(0,n.jsx)("button",{onClick:()=>C(e.id),className:"p-1 text-red-600 hover:text-red-800",title:"Sil",children:(0,n.jsx)(l.Ybf,{})}),(0,n.jsx)("button",{onClick:()=>f(e),className:"p-1 text-amber-600 hover:text-amber-800",title:"D\xfczenle",children:(0,n.jsx)(l.vPQ,{})})]})]})},e.id)})}):(0,n.jsx)("div",{className:"text-center p-8 text-gray-500",children:"Kurum bulunamadı"})]})]})})}},4230:function(e,a,s){"use strict";let n,t,l;s.d(a,{I:function(){return l},db:function(){return t}});var r=s(738),i=s(5978),o=s(3301);let m={apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:"",measurementId:""};if(!(0,r.C6)().length){if(Object.values(m).every(e=>void 0!==e&&""!==e))try{n=(0,r.ZF)(m),t=(0,i.ad)(n),l=(0,o.v0)(n)}catch(e){console.error("Firebase initialization error",e)}else console.error("Firebase config is missing or incomplete")}}},function(e){e.O(0,[358,242,956,943,67,971,117,744],function(){return e(e.s=4137)}),_N_E=e.O()}]);